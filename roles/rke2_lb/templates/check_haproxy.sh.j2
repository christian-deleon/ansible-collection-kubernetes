#!/bin/bash
# Simple HAProxy health check script

# Check if HAProxy process is running
if ! pgrep -x haproxy > /dev/null; then
    exit 1
fi

# Check if HAProxy is listening on required ports
for port in 6443 9345; do
    if ! ss -nltp | grep -q ":${port}.*haproxy"; then
        exit 1
    fi
done

exit 0
